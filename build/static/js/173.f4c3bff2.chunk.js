"use strict";(self.webpackChunkeasy_permit=self.webpackChunkeasy_permit||[]).push([[173],{21173:function(e,r,n){n.r(r),n.d(r,{default:function(){return z}});var t=n(74165),l=n(15861),o=n(1413),a=n(29439),i=n(47313),s=n(85554),d=n(7410),u=n(21933),c=n(9019),h=n(47825),m=n(70501),x=n(69099),v=n(61113),p=n(67076),_=n(1550),j=n(5178),Z=n(55685),f=n(83929),b=n(74268),g=n(26299),y=n(46417);function C(e){var r=e.id,n=e.label,t=e.name,l=e.data,a=e.value,i=e.onChange,s=e.onInputChange,d=[{label:"",value:""}];l.forEach((function(e){var r="".concat(e.street_line,", ").concat(e.city,", ").concat(e.state,", ").concat(e.zipcode),n=e;d.some((function(e){return e.label===r}))||d.push({label:r,value:n})}));var u={options:d,getOptionLabel:function(e){return e.label}};return(0,y.jsx)(g.Z,(0,o.Z)((0,o.Z)({},u),{},{id:r,autoComplete:!0,clearOnEscape:!0,includeInputInList:!0,value:a,onChange:i,onInputChange:s,renderInput:function(e){return(0,y.jsx)(p.Z,(0,o.Z)((0,o.Z)({},e),{},{label:n,name:t,variant:"standard"}))},isOptionEqualToValue:function(){return!0}}))}var B=n(57983),q=n(60941),w=n(44573),P=n(77018),z=function(){var e,r,n,g,z,T,S,k,F,A,W,R=(0,s.v9)((function(e){return e.smartyAutoCompleteAddress})).smartyAutoCompleteAddressList,I=(0,s.v9)((function(e){return e.getPermitValidation})).getPermitValidation,E=(0,s.v9)((function(e){return e.saveProperty})).saveProperty,L=(0,i.useState)(0),V=(0,a.Z)(L,2),O=V[0],D=V[1],N=(0,i.useState)(""),U=(0,a.Z)(N,2),G=U[0],H=U[1],M=(0,s.I0)();console.log("saveProperty: ",null===E||void 0===E||null===(e=E.data)||void 0===e?void 0:e.success);var Y={climate_zone:"",full_street_address:"",unit:"",apn:"",owner:"",year_built:"",square_feet:"",lot_size:"",bedrooms:"",total_rooms:"",project_extent:"",construction_worker:""},$=u.Ry().shape({climate_zone:u.Rx().required("Climate Zone is required"),full_street_address:u.Z_().required("Full Street Address is required"),unit:u.Z_().required("Uni is required"),apn:u.Z_().required("APN is required"),owner:u.Z_().required("Owner is required"),year_built:u.Rx().required("Year Built is required"),square_feet:u.Rx().required("Square Feet is required"),lot_size:u.Rx().required("Lot Size is required"),bedrooms:u.Rx().required("Bedrooms is required"),total_rooms:u.Rx().required("Total Rooms is required"),project_extent:u.Z_().required("Project extend is required"),construction_worker:u.Z_().required("Construction worker is required")}),J=(0,d.TA)({initialValues:Y,validationSchema:$,onSubmit:function(e){console.log("property update data: ",e),K(e)},enableReinitialize:!0});(0,i.useEffect)((function(){var e,r;null!==I&&void 0!==I&&null!==(e=I.data)&&void 0!==e&&e.data&&J.setValues((0,o.Z)((0,o.Z)({},Y),null===I||void 0===I||null===(r=I.data)||void 0===r?void 0:r.data))}),[null===I||void 0===I||null===(r=I.data)||void 0===r?void 0:r.data]);var K=function(){var e=(0,l.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M((0,w.b)(r));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),Q=(0,d.TA)({initialValues:{address:null},onSubmit:function(e){X(e)},enableReinitialize:!0}),X=function(){var e=(0,l.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M((0,q.H)(null===r||void 0===r?void 0:r.address));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){var e,r;!0===(null===E||void 0===E||null===(e=E.data)||void 0===e?void 0:e.success)&&(H("Data saved successfully"),D(2)),!1===(null===E||void 0===E||null===(r=E.data)||void 0===r?void 0:r.success)&&(H("Data can not save"),D(2))}),[E]),(0,i.useEffect)((function(){H("")}),[O]),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(c.ZP,{container:!0,spacing:3,children:(0,y.jsxs)(h.Z,{component:"main",maxWidth:"sm",children:[(0,y.jsx)(c.ZP,{item:!0,xs:12,sm:0,md:2}),!0===(null===I||void 0===I||null===(n=I.data)||void 0===n?void 0:n.success)?(0,y.jsx)(y.Fragment,{}):(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(c.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,y.jsx)(m.Z,{elevation:3,style:{padding:"20px",marginTop:"20px"},children:(0,y.jsxs)("form",{onSubmit:Q.handleSubmit,children:[(0,y.jsx)(c.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,y.jsx)(C,{id:"auto-complete",label:"Search Address",data:R,name:"address",value:Q.values.address,onChange:function(e,r){Q.setFieldValue("address",r)},onInputChange:function(e,r){0===r.length&&M((0,P.dG)()),r.length>=5&&M((0,q.$)(r)),M((0,P.D0)())}})}),(0,y.jsxs)(c.ZP,{item:!0,xs:12,sm:12,md:12,style:{textAlign:"center",marginTop:"20px"},children:[(0,y.jsx)("p",{children:!1===(null===I||void 0===I||null===(g=I.data)||void 0===g?void 0:g.success)?"Not Available":""}),(0,y.jsx)(x.Z,{type:"submit",variant:"outlined",color:!0===(null===I||void 0===I||null===(z=I.data)||void 0===z?void 0:z.success)?"success":!1===(null===I||void 0===I||null===(T=I.data)||void 0===T?void 0:T.success)?"secondary":"primary",endIcon:(0,y.jsx)(B.Z,{}),children:!0===(null===I||void 0===I||null===(S=I.data)||void 0===S?void 0:S.success)?"Get permit":"Submit"})]})]})})})}),!0===(null===I||void 0===I||null===(k=I.data)||void 0===k?void 0:k.success)?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.ZP,{item:!0,xs:12,sm:0,md:2}),(0,y.jsxs)(m.Z,{elevation:3,style:{padding:"20px",marginTop:"20px"},children:[(0,y.jsx)(v.Z,{component:"h1",variant:"h5",style:{marginBottom:"20px",textAlign:"center"},children:"Update Property Details"}),(0,y.jsxs)("form",{onSubmit:J.handleSubmit,children:[(0,y.jsxs)(c.ZP,{container:!0,spacing:2,children:[0===O&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,y.jsx)(p.Z,{fullWidth:!0,id:"climate_zone",name:"climate_zone",label:"Climate Zone",variant:"outlined",onChange:J.handleChange,onBlur:J.handleBlur,value:J.values.climate_zone,error:J.touched.climate_zone&&Boolean(J.errors.climate_zone),helperText:J.touched.climate_zone&&J.errors.climate_zone})}),(0,y.jsx)(c.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,y.jsx)(p.Z,{fullWidth:!0,id:"full_street_address",name:"full_street_address",label:"Full Street Address",variant:"outlined",onChange:J.handleChange,onBlur:J.handleBlur,value:J.values.full_street_address,disabled:!0,error:J.touched.full_street_address&&Boolean(J.errors.full_street_address),helperText:J.touched.full_street_address&&J.errors.full_street_address})}),(0,y.jsx)(c.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,y.jsx)(p.Z,{fullWidth:!0,id:"unit",name:"unit",label:"Unit",variant:"outlined",onChange:J.handleChange,onBlur:J.handleBlur,value:J.values.unit,error:J.touched.unit&&Boolean(J.errors.unit),helperText:J.touched.unit&&J.errors.unit})}),(0,y.jsx)(c.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,y.jsx)(p.Z,{fullWidth:!0,id:"apn",name:"apn",label:"APN",variant:"outlined",onChange:J.handleChange,onBlur:J.handleBlur,value:J.values.apn,disabled:!0,error:J.touched.apn&&Boolean(J.errors.apn),helperText:J.touched.apn&&J.errors.apn})}),(0,y.jsx)(c.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,y.jsx)(p.Z,{fullWidth:!0,id:"owner",name:"owner",label:"Owner",variant:"outlined",onChange:J.handleChange,onBlur:J.handleBlur,value:J.values.owner,error:J.touched.owner&&Boolean(J.errors.owner),helperText:J.touched.owner&&J.errors.owner})}),(0,y.jsx)(c.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,y.jsx)(p.Z,{fullWidth:!0,id:"year_built",name:"year_built",label:"Year Built",variant:"outlined",onChange:J.handleChange,onBlur:J.handleBlur,value:J.values.year_built,disabled:!0,error:J.touched.year_built&&Boolean(J.errors.year_built),helperText:J.touched.year_built&&J.errors.year_built})}),(0,y.jsx)(c.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,y.jsx)(p.Z,{fullWidth:!0,id:"square_feet",name:"square_feet",label:"Square Feet",variant:"outlined",onChange:J.handleChange,onBlur:J.handleBlur,value:J.values.square_feet,disabled:!0,error:J.touched.square_feet&&Boolean(J.errors.square_feet),helperText:J.touched.square_feet&&J.errors.square_feet})}),(0,y.jsx)(c.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,y.jsx)(p.Z,{fullWidth:!0,id:"lot_size",name:"lot_size",label:"Lot Size",variant:"outlined",onChange:J.handleChange,onBlur:J.handleBlur,value:J.values.lot_size,disabled:!0,error:J.touched.lot_size&&Boolean(J.errors.lot_size),helperText:J.touched.lot_size&&J.errors.lot_size})}),(0,y.jsx)(c.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,y.jsx)(p.Z,{fullWidth:!0,id:"bedrooms",name:"bedroom",label:"Bedrooms",variant:"outlined",onChange:J.handleChange,onBlur:J.handleBlur,value:J.values.bedrooms,disabled:!0,error:J.touched.bedrooms&&Boolean(J.errors.bedrooms),helperText:J.touched.bedrooms&&J.errors.bedrooms})}),(0,y.jsx)(c.ZP,{item:!0,xs:12,sm:12,md:12,children:(0,y.jsx)(p.Z,{fullWidth:!0,id:"total_rooms",name:"total_rooms",label:"Total Rooms",variant:"outlined",onChange:J.handleChange,onBlur:J.handleBlur,value:J.values.total_rooms,disabled:!0,error:J.touched.total_rooms&&Boolean(J.errors.total_rooms),helperText:J.touched.total_rooms&&J.errors.total_rooms})})]}),1===O&&(0,y.jsx)(c.ZP,{item:!0,xs:12,children:(0,y.jsxs)(_.Z,{children:[(0,y.jsx)(j.Z,{id:"demo-radio-buttons-group-label",children:"What best describes the extent of your project?"}),(0,y.jsxs)(Z.Z,{"aria-label":"project_extent",name:"project_extent",onChange:J.handleChange,onBlur:J.handleBlur,value:J.values.project_extent||"",row:!0,children:[(0,y.jsx)(f.Z,{value:"new_structure",control:(0,y.jsx)(b.Z,{color:"primary"}),label:"New Structure"}),(0,y.jsx)(f.Z,{value:"repair_replace_alter",control:(0,y.jsx)(b.Z,{color:"primary"}),label:"Repair, Replace, or Alter Existing Structure"})]}),J.touched.project_extent&&J.errors.project_extent&&(0,y.jsx)(v.Z,{variant:"body2",color:"error",children:J.errors.project_extent})]})}),2===O&&(0,y.jsx)(c.ZP,{item:!0,xs:12,children:(0,y.jsxs)(_.Z,{children:[(0,y.jsx)(j.Z,{id:"demo-radio-buttons-group-label",children:"Who will be doing the construction work?"}),(0,y.jsxs)(Z.Z,{"aria-label":"construction_worker",name:"construction_worker",onChange:J.handleChange,onBlur:J.handleBlur,value:J.values.construction_worker||"",row:!0,children:[(0,y.jsx)(f.Z,{value:"owner_builder",control:(0,y.jsx)(b.Z,{color:"primary"}),label:"Myself as Owner-Builder"}),(0,y.jsx)(f.Z,{value:"licensed_contractor",control:(0,y.jsx)(b.Z,{color:"primary"}),label:"Licensed Contractor"})]}),J.touched.construction_worker&&J.errors.construction_worker&&(0,y.jsx)(v.Z,{variant:"body2",color:"error",children:J.errors.construction_worker})]})}),(0,y.jsxs)(c.ZP,{container:!0,spacing:2,justifyContent:"space-between",style:{marginTop:"1px",marginLeft:"1px"},children:[(0,y.jsx)(c.ZP,{item:!0,children:O>0&&(0,y.jsx)(x.Z,{variant:"contained",color:"primary",onClick:function(){D((function(e){return Math.max(e-1,0)}))},children:"Back"})}),(0,y.jsx)(c.ZP,{item:!0,children:O<2&&(0,y.jsx)(x.Z,{variant:"contained",color:"primary",onClick:function(){D((function(e){return e+1}))},children:"Continue"})})]})]}),!0===(null===E||void 0===E||null===(F=E.data)||void 0===F?void 0:F.success)?(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(v.Z,{variant:"body1",style:{color:"green",textAlign:"center"},children:G})}):(0,y.jsx)(y.Fragment,{}),!1===(null===E||void 0===E||null===(A=E.data)||void 0===A?void 0:A.success)?(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(v.Z,{variant:"body1",style:{color:"red",textAlign:"center"},children:G})}):(0,y.jsx)(y.Fragment,{}),2===O&&(0,y.jsx)(y.Fragment,{children:!0===(null===E||void 0===E||null===(W=E.data)||void 0===W?void 0:W.success)?(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(x.Z,{type:"submit",fullWidth:!0,variant:"outlined",color:"primary",style:{marginTop:"20px"},children:"Home"})}):(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(x.Z,{type:"submit",fullWidth:!0,variant:"outlined",color:"primary",style:{marginTop:"20px"},children:"Submit"})})})]})]})]}):(0,y.jsx)(y.Fragment,{})]})})})}}}]);